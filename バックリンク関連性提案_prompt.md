# Obsidian ノート関連性分析プロンプト

各.mdファイルの内容をコサイン類似度で分析し、関連性の高いファイルペアを提案する。バックリンクの記述はユーザーが手動で行う。

---

## エージェントへの指示

### 目的
Obsidianフォルダ内のすべての.mdファイルの内容を分析し、関連性の高いファイルペアを提案する。

### 対象
- **パス**: `c:\Users\user\Desktop\obsidian`
- **対象**: `.md` ファイルのみ
- **除外**: `.obsidian` フォルダ（設定ファイル）

### 処理手順

1. **スキャン**: 対象フォルダ内のすべての `.md` ファイルを再帰的に取得する
   - **除外**: `.obsidian`、`src`、`node_modules` などのシステム・コード系フォルダ

2. **テキスト抽出**: 各ファイルの重要要素を抽出する
   - **ファイル名**: 最も重要（重み付け: 高）
   - **見出し (# Header)**: 重要（重み付け: 中）
   - **本文**: 通常（重み付け: 低）
   - ※ YAMLフロントマターやコードブロックはノイズになるため除外する

3. **分析実行**: 
   - 抽出したテキスト情報を元に、ベクトル化またはキーワードマッチングを行う
   - 単なる文字の一致だけでなく、**「トピックの類似性」**を重視する
   - 類似度スコア（0.0〜1.0）を算出する

4. **フィルタリング**: 
   - 類似度が閾値（推奨: 0.3〜0.5）を超えるペアを抽出する
   - 短すぎるファイル（メモ書き程度）は除外してもよい

5. **レポート生成**: 以下の形式でレポートを出力する

### 出力形式

```markdown
# バックリンク候補レポート
生成日時: YYYY-MM-DD HH:MM

## 高関連性ペア（類似度 0.5以上）
※ファイル名や見出しが強く関連しているペア

| 類似度 | ファイルA | ファイルB | 共通トピック |
|--------|-----------|-----------|--------------|
| 0.72   | [[プロンプト設計]] | [[AI文章バレ対策]] | AI, プロンプト |

## 推奨アクション
1. このレポートを確認し、有用なペアを見つける
2. 提案されたペアに対し、手動でリンクを追記する
```

### 出力先
- レポートファイル: `c:\Users\user\Desktop\obsidian\backlink_suggestions.md`

### 注意事項

- **読み取り専用**: このタスクはファイル変更を行わない（分析のみ）
- 既存リンクの有無に関係なく、**内容の類似性のみ**で判断する
- 短すぎるファイル（100文字未満など）は除外を検討

---

## 段階的運用の推奨

1. **初回**: このプロンプトで関連性分析を実行
2. **手動リンク**: レポートを見ながら `[[ファイル名]]` を手動追記
3. **リンク蓄積後**: 「バックリンク自動生成_prompt.md」で逆引きバックリンクを自動化

---

## カスタマイズオプション

- **閾値調整**: 類似度の閾値を変更（緩め: 0.2, 厳しめ: 0.5）
- **除外パターン**: Daily noteフォルダなど特定パスを除外
- **最大ペア数**: 出力するペア数を制限（例: 上位50組）
